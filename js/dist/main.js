/*
 * apartment51 1.0.0
 * Â© Greylab 2017. Tutti i Diritti riservati.
 * 
 * Luca Cattide - Front-End Web Developer <luca.cattide@greylab.it> | Greylab <http://www.greylab.it>
 * Rilasciato sotto licenza ISC.
*/
"use strict";function caricaModello(t,e,a,i){i=new Sketchfab(e,t),i.init(a,{success:function(t){t.load(),t.start(),t.addEventListener("viewerready",function(){var e=3,a=.3,i=5,o=10;$("#api-frame").removeClass("invisibile"),$("#cover-3d").addClass("animated fadeOut").delay(500).addClass("nascosto"),$("#container-3d button").addClass("visibile"),t.lookat([-222,-190,148],[14,-14,-31],e),setTimeout(function(){t.lookat([194,-195,182],[0,-48,42],e)},3e3),setTimeout(function(){t.lookat([-6,-277,66],[0,-47,42],3)},6e3),setTimeout(function(){t.lookat([-160,-164,115],[3,-33,15],e)},9e3),setTimeout(function(){t.gotoAnnotation(0)},1e4),$("#screenshot").on("click tap",function(){t.getScreenShot(function(t,e){if(!t){var a=$("#api-frame").height(),i=$("#api-frame").width(),o=window.open(e,"_blank","height = "+a+", width = "+i+"fullscreen=no, toolbar=no, status=no, menubar=no, scrollbars=no, resizable=yes, directories=no, location=no, left="+($(window).width()/2-i/2)+", top="+($(window).height()/2-a/2)+", screenX="+($(window).width()/2-i/2)+", screenY="+($(window).height()/2-a/2));o.document.write('<body style="margin: 0; padding: 0;"><img src="'+e+'" alt="3D Screenshot" /><a href="'+e+'" style="background-color: gray; color: black; bottom: 0; font-family: Arial, Helvetica, sans-serif; padding: 1em 16px; position: absolute; right: 0; text-transform: uppercase; text-decoration: none;" download>Download</a></body>')}})}),t.zoom=function(e,a,i,o){t.getCameraLookAt(function(s,n){if(!s){var r=n.position,d=r[0],l=r[1],c=r[2],m=n.target,$=Math.sqrt(d*d+l*l+c*c),p=void 0,h=void 0;if(isNaN(i)&&(i=.1),isNaN(o)&&(o=1/0),$===i||$===o)return;$*=e,$<i&&e<1?$=i:$>o&&e>1&&($=o),p=Math.atan2(l,d),h=Math.atan2(Math.sqrt(d*d+l*l),c),d=$*Math.sin(h)*Math.cos(p),l=$*Math.sin(h)*Math.sin(p),c=$*Math.cos(h),t.setCameraLookAt([d,l,c],m,a)}})},$("#zoom-in").on("click tap",function(){t.zoom(1-a,e,i,o)}),$("#zoom-out").on("click tap",function(){t.zoom(1+a,e,i,o)})})},error:function(t){$("#container-3d").append(t)},annotation_cycle:0,annotations_visible:0,autospin:0,autostart:1,camera:1,fps_speed:60,preload:1,ui_stop:0,transparent:1})}function headline(){$(window).on("resize",function(){$(this).width()>=992?($("#modale").removeClass("nascondi").appendTo("#headline"),$(".tip").on("mouseover",function(){$("#modale #name").html($(this).attr("data-name")),$("#modale #mark").html($(this).attr("data-mark")),$("#modale #prezzo").html($(this).attr("data-price")),$("#modale #anteprima img").attr("src","img/"+$(this).attr("data-image")),$("#modale #height").html($(this).attr("data-height")),$("#modale #width").html($(this).attr("data-width")),$("#modale #deep").html($(this).attr("data-deep")),$("#modale #sh").html($(this).attr("data-sh")),$("#modale #weight").html($(this).attr("data-weight")),$(this).offset().left>$(window).width()/2-60?$("#modale").css({left:$(this).offset().left-$("#modale").width()/3*2,top:$(this).offset().top-150}):$("#modale").css({left:$(this).offset().left+60,top:$(this).offset().top-500}),$("#modale").addClass("sopra").delay(300).addClass("visibile")}),$("#modale").hover(function(){},function(){$(this).removeClass("visibile").delay(300).removeClass("sopra")})):($("#modale").insertAfter("#headline"),$(".tip").on("click tap",function(){$("#modale #name").html($(this).attr("data-name")),$("#modale #mark").html($(this).attr("data-mark")),$("#modale #prezzo").html($(this).attr("data-price")),$("#modale #anteprima img").attr("src","img/"+$(this).attr("data-image")),$("#modale #height").html($(this).attr("data-height")),$("#modale #width").html($(this).attr("data-width")),$("#modale #deep").html($(this).attr("data-deep")),$("#modale #sh").html($(this).attr("data-sh")),$("#modale #weight").html($(this).attr("data-weight")),document.location.href="#modale",$(this)[0].hasAttribute("active")?(setTimeout(function(){$("#modale").removeClass("visibile")},300),$("#modale").removeClass("mostra"),$("#modale").removeClass("sopra"),$(this).removeAttr("active")):($(".tip").removeAttr("active"),$(this).attr("active",""),$("#modale").addClass("sopra"),$("#modale").addClass("mostra"),setTimeout(function(){$("#modale").addClass("visibile")},300))}))}).resize()}function init(){var t=$("#api-frame")[0],e="1.0.0",a="eca67bc2813e4d24b7d25d52b241fe76",i=null;Pace.on("done",function(){$("#loading img").addClass("animated fadeOutDown"),$("#loading").fadeOut()}),caricaModello(t,e,a,i),$("#carica").on("click tap",function(){caricaModello(t,e,a,i),$("#api-frame").hasClass("invisibile")&&$("#api-frame").removeClass("invisibile")}),initCarousel()}function initCarousel(){$(".owl-carousel").owlCarousel({loop:!1,center:!1,margin:32,stagePadding:32,autoWidth:!1,nav:!1,dots:!1,autoplay:!0,autoplayHoverPause:!0,rewind:!0,items:1,responsive:{0:{items:1,slideBy:1},992:{items:2,slideBy:2}}})}function mobile(){$(window).on("load resize",function(){$(window).width()<992?($("#container-sedia-360").insertAfter($("#container-scopri")),$("#sedia-colore").insertAfter($("#colori article h2")),$(".progetto-sx img").appendTo("#progetto-mobile-1"),$(".progetto-dx img, .progetto-dx-1 img").appendTo("#progetto-mobile-2"),$("#container-logo-1").insertBefore("#info"),$("#sedia-360 img").attr({src:"/img/360-3-mobile/cassettiera-1.jpg","data-images":"/img/360-3-mobile/cassettiera-#.jpg"}),$("#claim-carousel").insertAfter("#container-sedia-360")):($("#container-scopri").insertAfter($("#container-sedia-360")),$("#sedia-colore").appendTo("#colori > .disattiva"),$("#progetto-mobile-1 img").appendTo(".progetto-sx"),$("#progetto-mobile-2 img").appendTo(".progetto-dx"),$("#container-logo-1").insertAfter("#info"),$("#sedia-360 img").attr({src:"/img/360-3/cassettiera-1.jpg","data-images":"/img/360-3/cassettiera-#.jpg"}),$("#claim-carousel").insertAfter("#sedia-1 + .owl-carousel"))})}function tips(){var t=!1;$("#tips h2").removeClass("aperto"),$("#tips article p, #explore").slideUp(),$(".freccia").on("click tap",function(){t?($(this).removeClass("attiva"),$("#tips h2").removeClass("aperto"),$("#tips article p, #explore").slideUp(),t=!1):($(this).addClass("attiva"),$("#tips h2").addClass("aperto"),$("#tips article p, #explore").slideDown(),t=!0)})}function preview(){$(".selettore").on("click tap",function(){var t=$(".selettore-colore",this).attr("data-id"),e=$(".selettore-colore",this).attr("data-type");$(this).parent().find(".selettore-colore").removeClass("selezionato deselezionato"),$(".selettore-colore",this).addClass("selezionato"),$(this).parent().find('.selettore-colore:not(".selezionato")').addClass("deselezionato"),$('.anteprima-sezione[data-type="'+e+'"]').attr("style",'background-image: url("img/anteprima/prosp/prosp_'+e+"_"+t+'.png");'),$('.anteprima-fronte-sezione[data-type="'+e+'"]').attr("style",'background-image: url("img/anteprima/front/front_'+e+"_"+t+'.png");'),$('.anteprima-lato-sezione[data-type="'+e+'"]').attr("style",'background-image: url("img/anteprima/side/side_'+e+"_"+t+'.png");')})}function tracker(){var t=0;$(document).on("input","#sedia-range",function(){var e=$(this).val();if(e<0&&e>=-360)if(e<t){var a=4;do $("#sedia-360 img").trigger("stepLeft"),a--;while(a>1)}else{var i=4;do $("#sedia-360 img").trigger("stepRight"),i--;while(i>1)}else if(e>0&&e<=360)if(e>t){var o=4;do $("#sedia-360 img").trigger("stepLeft"),o--;while(o>1)}else{var s=4;do $("#sedia-360 img").trigger("stepRight"),s--;while(s>1)}t=e})}function transizioni(){$(window).on("scroll",function(){$(window).width()>=992?($("#sedia-360, #spin, #sedia-1, #discover h3").addClass("sfuma"),$("#sedia-2, .discover-lato-2 p, .colore, #container-progetti").addClass("sfuma"),$(this).scrollTop()>=$("#headline").offset().top+$("#headline").outerHeight()&&($("#sedia-360, #spin").removeClass("sfuma"),$("#sedia-360").addClass("animated fadeIn"),$("#spin").addClass("animated flipInY")),$("#vr").length>0&&$(this).scrollTop()>=$("#vr").offset().top+$("#vr").outerHeight()/2&&($("#sedia-360, #spin").removeClass("sfuma"),$("#sedia-360").addClass("animated fadeIn"),$("#spin").addClass("animated flipInY")),$("#preview").length>0&&$(this).scrollTop()>=$("#preview").offset().top+$("#preview").outerHeight()/2?($("#sedia-1, #discover h3").removeClass("sfuma"),$("#sedia-1").addClass("animated fadeInLeft"),$("#discover h3").addClass("animated fadeInRight")):$(this).scrollTop()>=$("#discover").offset().top&&($("#sedia-1, #discover h3").removeClass("sfuma"),$("#sedia-1").addClass("animated fadeInLeft"),$("#discover h3").addClass("animated fadeInRight")),$("#discover").length>0&&$(this).scrollTop()>=$("#discover").offset().top+$("#discover").outerHeight()/2&&($("#container-progetti").removeClass("sfuma"),$("#container-progetti").addClass("animated fadeInLeft"))):($("#sedia-360, #spin, #sedia-1, #discover h3").removeClass("sfuma"),$("#sedia-2, .discover-lato-2 p, .colore, #container-progetti").removeClass("sfuma"))})}function tornaSu(){$(window).on("scroll",function(){$(this).scrollTop()>0?($(".torna-su").fadeIn(),$(".torna-su").removeClass("nascondi")):$(".torna-su").fadeOut()}),$(".torna-su").on("click tap",function(){$("html, body").animate({scrollTop:0},"fast")})}function vr(){$("a-scene").on("exit-vr",function(){window.location.reload()})}$(document).ready(function(){headline(),init(),mobile(),transizioni(),preview(),tips(),tracker(),tornaSu(),vr()});
//# sourceMappingURL=main.js.map
